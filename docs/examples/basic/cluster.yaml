apiVersion: rds.valkey.buf.red/v1alpha1
kind: Valkey
metadata:
  name: valkey-cluster
  namespace: default
spec:
  # Valkey version, supports 7.2, 8.0, 8.1
  version: "8.0"
  
  # Valkey architecture, supports cluster, failover, replica
  arch: cluster

  # Cluster configuration
  replicas:
    shards: 3
    replicasOfShard: 1
  
  # Resource allocation
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi" 
      cpu: "500m"
  
  # Network access
  access:
    serviceType: ClusterIP
  
  # Basic Valkey configuration
  customConfigs:
    maxmemory-policy: "allkeys-lru"
    tcp-keepalive: "300"
